<header class="bg-white shadow-md z-50 relative">
  <% if (!locals.user) { %>
    <p class="bg-black text-white text-center py-1" style="font-size:12px">Sign up and get 20% off to your first order. <a style="font-size:12px" href="/signup">SignUp Now</a></p>
  <% } %>
  
  <div class="container mx-auto px-4 py-4 flex justify-between items-center">
    <!-- Logo -->
    <div class="text-2xl font-bold">
      Laris
    </div>
    
    <!-- Navigation Links -->
    <nav class="hidden md:flex space-x-6">
      <a class="text-gray-600 hover:text-gray-800" href="/">Home</a>
      <a class="text-gray-600 hover:text-gray-800" href="/shop">Shop</a>
      <a class="text-gray-600 hover:text-gray-800" href="/collections">Collections</a>
      <a class="text-gray-600 hover:text-gray-800" href="/about">About</a>
      <a class="text-gray-600 hover:text-gray-800" href="/contact">Contact</a>
    </nav>
    
    <!-- Search bar - conditionally positioned based on page -->
    <% if (locals.currentPage && (currentPage === 'home' || currentPage === 'login')) { %>
      <div style="position: relative; left: 230px;" class="relative">
        <input class="border border-gray-300 rounded-full py-1 px-1 pl-6 text-xs focus:outline-none focus:ring-2 focus:ring-gray-300" placeholder="Search" type="text"/>
        <img alt="Search icon" class="absolute left-2 top-1/2 transform -translate-y-1/2" height="14" src="./images/search.png" width="14"/>
      </div>
    <% } else { %>
      <div class="search">
        <div class="relative">
          <input class="border border-gray-300 rounded-full py-1 px-1 pl-6 text-xs focus:outline-none focus:ring-2 focus:ring-gray-300" placeholder="Search" type="text"/>
          <img alt="Search icon" class="absolute left-2 top-1/2 transform -translate-y-1/2" height="14" src="./images/search.png" width="14"/>
        </div>
      </div>
    <% } %>

    <!-- Action Buttons container - conditionally positioned based on page -->
    <% if (locals.currentPage && (currentPage === 'home' || currentPage === 'login')) { %>
      <div class="flex items-center" style="position: relative; left: 70px;">
    <% } else { %>
      <div class="flex items-center">
    <% } %>
      
      <!-- Wishlist - conditionally positioned based on page -->
      <% if (locals.currentPage && (currentPage === 'home' || currentPage === 'login')) { %>
        <div class="mx-2">
      <% } else { %>
        <div style="position: relative; left: -37px;" class="mx-2">
      <% } %>
        <a class="text-gray-600 hover:text-gray-800" href="/wishlist">
          <img alt="Wishlist icon" class="w-4 h-4" src="./images/heart.png" width="16" height="16"/>
        </a>
      </div>
      
      <!-- Shopping Cart - conditionally positioned based on page -->
      <% if (locals.currentPage && (currentPage === 'home' || currentPage === 'login')) { %>
        <div style="position: relative; left: -89px;" class="mx-2">
      <% } else { %>
        <div style="position: relative; left: -89px;" class="mx-2">
      <% } %>
        <a class="text-gray-600 hover:text-gray-800" href="/cart">
          <img alt="Shopping cart icon" class="w-4 h-4" src="./images/shopping-bag.png" width="16" height="16"/>
        </a>
      </div>
      
      <!-- User/Account -->
      <div style="position: relative; left: 96px;" class="relative mx-2">
        <% if(locals.user) { %>
          <div class="dropdown relative">
            <a style="position: relative; left: 10px;" href="#" class="text-gray-600 hover:text-gray-800 flex items-center" id="dropdown-toggle">
              <img alt="User account icon" class="w-3 h-3 mr-1" src="./images/user.png" width="16" height="16"/>
              <!-- Username display -->
              <span class="text-sm max-w-[80px] truncate"><%= user.name %></span>
            </a>
            <div id="dropdown-menu" class="dropdown-content absolute right-0 mt-2 bg-white shadow-md rounded py-2 min-w-[160px] z-50 hidden">
              <a class="block px-4 py-2 text-gray-700 hover:bg-gray-100 text-sm" href="/userProfile">Profile</a>
              <a class="block px-4 py-2 text-gray-700 hover:bg-gray-100 text-sm" href="/logout">Log Out</a>
            </div>
          </div>
        <% } else { %>
          <a href="/login" class="text-gray-600 hover:text-gray-800 flex items-center">
            <img alt="User account icon" class="w-3 h-3 mr-1" src="./images/user.png" width="16" height="16"/>
            <span class="text-sm">Log In</span>
          </a>
        <% } %>
      </div>
    </div>
  </div>
</header>

<style>




  /* Updated dropdown styles */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1000;
    right: 0;
    top: 100%;
    border-radius: 4px;
  }
  
  .dropdown-content a {
    color: black;
    padding: 8px 12px;
    text-decoration: none;
    display: block;
    width: 100%;
  }
  
  .dropdown-content a:hover {
    background-color: #f1f1f1;
  }
  .search{
   position: relative;
   left: 257px;
  }
  
  .dropdown-content.show {
    display: block;
  }
  
  /* Truncate long usernames */
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
</style>

<script>
  // JavaScript to toggle dropdown
  document.addEventListener('DOMContentLoaded', function() {
    const dropdownToggle = document.getElementById('dropdown-toggle');
    const dropdownMenu = document.getElementById('dropdown-menu');
    
    if (dropdownToggle && dropdownMenu) {
      // Toggle dropdown on click
      dropdownToggle.addEventListener('click', function(e) {
        e.preventDefault();
        dropdownMenu.classList.toggle('show');
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!dropdownToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
          dropdownMenu.classList.remove('show');
        }
      });
    }
    
    // Get current page path
    const currentPath = window.location.pathname;
    
    // Add active class to current navigation item
    const navLinks = document.querySelectorAll('nav a');
    navLinks.forEach(link => {
      if (link.getAttribute('href') === currentPath) {
        link.classList.add('text-gray-900', 'font-medium');
        link.classList.remove('text-gray-600');
      }
    });
  });
</script>